{% extends "base.html" %}

{% block title %}Conectar ao Node - Lightning Wallet{% endblock %}

{% block content %}
    <h2>🔌 Conectar ao Node Lightning</h2>

    {% if error_message %}
        <div class="error-box">
            {{ error_message }}
        </div>
    {% endif %}

    <form method="post">
        <label>Endereço gRPC:</label>
        <input type="text" name="node_address" placeholder="Ex: node-ip:10009" required>
        
        <label>Macaroon HEX:</label>
        <input type="text" name="macaroon_hex" placeholder="Cole o macaroon em HEX" required>
        
        <label>TLS Cert HEX:</label>
        <input type="text" name="tls_cert_hex" placeholder="Cole o TLS Cert em HEX" required>
        
        <button type="submit">🔗 Conectar</button>
    </form>

    {% if nodes %}
        <h3>🔍 Nodes Salvos</h3>
        <div class="nodes-list">
            {% for node in nodes %}
                <form method="post">
                    <input type="hidden" name="node_address" value="{{ node[2] }}">
                    <input type="hidden" name="macaroon_hex" value="{{ node[3] }}">
                    <input type="hidden" name="tls_cert_hex" value="{{ node[4] }}">
                    <button type="submit">🌐 {{ node[1] }}</button>
                </form>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}
